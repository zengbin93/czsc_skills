# czsc_skills

ç¼ ä¸­è¯´ç¦…æŠ€æœ¯åˆ†ææŠ€èƒ½åº“ - åŸºäº waditu/czsc åº“çš„é‡åŒ–äº¤æ˜“ç­–ç•¥æŠ€èƒ½æ¨¡æ¿

## ç®€ä»‹

`czsc_skills` æ˜¯ä¸€ä¸ªå›´ç»• [waditu/czsc](https://github.com/waditu/czsc) åº“æ ¸å¿ƒå†…å®¹æ„å»ºçš„æŠ€èƒ½æ¨¡æ¿ä»“åº“ã€‚å®ƒæä¾›äº†ä¸€å¥—å¯å¤ç”¨çš„æŠ€èƒ½æ¨¡å—ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºåŸºäºç¼ è®ºçš„é‡åŒ–äº¤æ˜“ç­–ç•¥ã€‚

### ä»€ä¹ˆæ˜¯ç¼ è®ºï¼Ÿ

ç¼ è®ºï¼ˆç¼ ä¸­è¯´ç¦…ç†è®ºï¼‰æ˜¯ä¸€å¥—ç»“æ„åŒ–çš„æŠ€æœ¯åˆ†ææ–¹æ³•è®ºï¼Œé€šè¿‡è¯†åˆ«å¸‚åœºç»“æ„ï¼ˆåˆ†å‹ã€ç¬”ã€çº¿æ®µã€ä¸­æ¢ç­‰ï¼‰æ¥è¿›è¡Œäº¤æ˜“å†³ç­–ã€‚ç¼ è®ºçš„æ ¸å¿ƒç†å¿µæ˜¯"ä¸æµ‹è€Œæµ‹"ï¼Œå³ä¸é¢„æµ‹å¸‚åœºæ–¹å‘ï¼Œè€Œæ˜¯æ ¹æ®å¸‚åœºç»“æ„çš„å˜åŒ–åšå‡ºååº”ã€‚

## ç‰¹æ€§

- ğŸ¯ **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªæŠ€èƒ½éƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—ï¼Œæ˜“äºå¤ç”¨å’Œç»„åˆ
- ğŸ”§ **æŠ€èƒ½æ³¨å†Œå™¨**ï¼šç»Ÿä¸€çš„æŠ€èƒ½ç®¡ç†æœºåˆ¶ï¼Œæ–¹ä¾¿æŠ€èƒ½çš„æ³¨å†Œã€æŸ¥è¯¢å’Œåˆ›å»º
- ğŸ“Š **åŸºç¡€æŠ€èƒ½**ï¼šæä¾›åˆ†å‹è¯†åˆ«ã€ç¬”è¯†åˆ«ã€ä¿¡å·ç”Ÿæˆç­‰åŸºç¡€æŠ€èƒ½
- ğŸš€ **æ˜“äºæ‰©å±•**ï¼šåŸºäºæŠ½è±¡åŸºç±»è®¾è®¡ï¼Œå¯ä»¥è½»æ¾æ·»åŠ è‡ªå®šä¹‰æŠ€èƒ½
- ğŸ“š **å®Œæ•´æ–‡æ¡£**ï¼šæ¯ä¸ªæŠ€èƒ½éƒ½æœ‰è¯¦ç»†çš„æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹

## å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/zengbin93/czsc_skills.git
cd czsc_skills

# å®‰è£…ä¾èµ–
pip install -e .

# æˆ–å®‰è£…å¼€å‘ä¾èµ–
pip install -e ".[dev]"
```

## å¿«é€Ÿå¼€å§‹

### 1. ä½¿ç”¨åˆ†å‹è¯†åˆ«æŠ€èƒ½

```python
from czsc_skills.skills import FractalDetectorSkill

# åˆ›å»ºæŠ€èƒ½å®ä¾‹
skill = FractalDetectorSkill(
    name="åˆ†å‹è¯†åˆ«å™¨",
    include_potential=False
)

# å‡†å¤‡Kçº¿æ•°æ®
klines = [
    {"dt": "2024-01-01 09:30", "high": 10.5, "low": 10.0, "open": 10.2, "close": 10.3},
    {"dt": "2024-01-01 10:00", "high": 11.0, "low": 10.3, "open": 10.3, "close": 10.8},
    {"dt": "2024-01-01 10:30", "high": 10.7, "low": 10.2, "open": 10.8, "close": 10.4},
    # ... æ›´å¤šKçº¿æ•°æ®
]

# æ‰§è¡Œåˆ†å‹è¯†åˆ«
result = skill.execute(klines)
print(f"è¯†åˆ«åˆ° {result['count']} ä¸ªåˆ†å‹")
```

### 2. ä½¿ç”¨æŠ€èƒ½æ³¨å†Œå™¨

```python
from czsc_skills import SkillRegistry

# åˆ—å‡ºæ‰€æœ‰å·²æ³¨å†Œçš„æŠ€èƒ½
skills = SkillRegistry.list_skills()
print(f"å¯ç”¨æŠ€èƒ½: {skills}")

# é€šè¿‡æ³¨å†Œå™¨åˆ›å»ºæŠ€èƒ½å®ä¾‹
skill = SkillRegistry.create_skill(
    "BiRecognitionSkill",
    name="ç¬”è¯†åˆ«å™¨",
    min_bi_len=5
)

# æ‰§è¡ŒæŠ€èƒ½
result = skill.execute(klines)
```

## æ ¸å¿ƒæ¦‚å¿µ

### æŠ€èƒ½ï¼ˆSkillï¼‰

æŠ€èƒ½æ˜¯æœ¬åº“çš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ¯ä¸ªæŠ€èƒ½éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ã€‚æ‰€æœ‰æŠ€èƒ½éƒ½ç»§æ‰¿è‡ª `BaseSkill` æŠ½è±¡åŸºç±»ï¼Œå¹¶å®ç° `execute` æ–¹æ³•ã€‚

### æŠ€èƒ½æ³¨å†Œå™¨ï¼ˆSkillRegistryï¼‰

æŠ€èƒ½æ³¨å†Œå™¨ç”¨äºç®¡ç†æ‰€æœ‰å¯ç”¨çš„æŠ€èƒ½ã€‚é€šè¿‡è£…é¥°å™¨ `@SkillRegistry.register` è‡ªåŠ¨æ³¨å†ŒæŠ€èƒ½ï¼Œæ”¯æŒåŠ¨æ€æŸ¥è¯¢å’Œåˆ›å»ºæŠ€èƒ½å®ä¾‹ã€‚

## å†…ç½®æŠ€èƒ½

### 1. FractalDetectorSkill - åˆ†å‹è¯†åˆ«æŠ€èƒ½

è¯†åˆ«Kçº¿æ•°æ®ä¸­çš„é¡¶åˆ†å‹å’Œåº•åˆ†å‹ã€‚

**å‚æ•°ï¼š**
- `name`: æŠ€èƒ½åç§°
- `include_potential`: æ˜¯å¦åŒ…å«æ½œåœ¨åˆ†å‹

**è¿”å›ï¼š**
- `fractals`: æ‰€æœ‰åˆ†å‹åˆ—è¡¨
- `top_fractals`: é¡¶åˆ†å‹åˆ—è¡¨
- `bottom_fractals`: åº•åˆ†å‹åˆ—è¡¨
- `count`: åˆ†å‹æ€»æ•°

### 2. BiRecognitionSkill - ç¬”è¯†åˆ«æŠ€èƒ½

è¯†åˆ«Kçº¿æ•°æ®ä¸­çš„ç¬”ç»“æ„ã€‚ç¬”æ˜¯ç¼ è®ºä¸­çš„åŸºæœ¬ç»“æ„å•ä½ã€‚

**å‚æ•°ï¼š**
- `name`: æŠ€èƒ½åç§°
- `min_bi_len`: æœ€å°ç¬”é•¿åº¦ï¼ˆKçº¿æ•°é‡ï¼‰

**è¿”å›ï¼š**
- `bis`: è¯†åˆ«å‡ºçš„ç¬”åˆ—è¡¨
- `count`: ç¬”çš„æ•°é‡
- `last_bi`: æœ€åä¸€ç¬”çš„ä¿¡æ¯

### 3. SignalGeneratorSkill - ä¿¡å·ç”ŸæˆæŠ€èƒ½

æ ¹æ®ç¼ è®ºè¦ç´ ç”Ÿæˆäº¤æ˜“ä¿¡å·ã€‚

**å‚æ•°ï¼š**
- `name`: æŠ€èƒ½åç§°
- `signal_type`: ä¿¡å·ç±»å‹ï¼ˆ"ä¹°å–ç‚¹", "è¶‹åŠ¿", "èƒŒé©°", "all"ï¼‰

**è¿”å›ï¼š**
- `signals`: ä¿¡å·åˆ—è¡¨
- `count`: ä¿¡å·æ•°é‡
- `latest_signal`: æœ€æ–°ä¿¡å·

## å¼€å‘è‡ªå®šä¹‰æŠ€èƒ½

### åˆ›å»ºæ–°æŠ€èƒ½

```python
from czsc_skills.base import BaseSkill, SkillRegistry

@SkillRegistry.register
class MyCustomSkill(BaseSkill):
    """è‡ªå®šä¹‰æŠ€èƒ½"""
    
    def __init__(self, name: str, **kwargs):
        super().__init__(name, **kwargs)
        # åˆå§‹åŒ–è‡ªå®šä¹‰å‚æ•°
    
    def execute(self, data, **kwargs):
        """æ‰§è¡ŒæŠ€èƒ½é€»è¾‘"""
        # å®ç°ä½ çš„é€»è¾‘
        return {"result": "success"}
    
    def validate(self):
        """éªŒè¯é…ç½®"""
        return True
```

### ä½¿ç”¨è‡ªå®šä¹‰æŠ€èƒ½

```python
# ç›´æ¥åˆ›å»ºå®ä¾‹
skill = MyCustomSkill(name="æˆ‘çš„æŠ€èƒ½")
result = skill.execute(data)

# æˆ–é€šè¿‡æ³¨å†Œå™¨åˆ›å»º
skill = SkillRegistry.create_skill("MyCustomSkill", name="æˆ‘çš„æŠ€èƒ½")
result = skill.execute(data)
```

## ç¤ºä¾‹ä»£ç 

æŸ¥çœ‹ `examples/` ç›®å½•è·å–æ›´å¤šä½¿ç”¨ç¤ºä¾‹ï¼š

- `basic_usage.py`: åŸºç¡€ä½¿ç”¨ç¤ºä¾‹

## é¡¹ç›®ç»“æ„

```
czsc_skills/
â”œâ”€â”€ czsc_skills/           # ä¸»åŒ…
â”‚   â”œâ”€â”€ __init__.py       # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ base.py           # åŸºç¡€ç±»å®šä¹‰
â”‚   â””â”€â”€ skills/           # æŠ€èƒ½æ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ fractal_detector.py    # åˆ†å‹è¯†åˆ«
â”‚       â”œâ”€â”€ bi_recognition.py      # ç¬”è¯†åˆ«
â”‚       â””â”€â”€ signal_generator.py    # ä¿¡å·ç”Ÿæˆ
â”œâ”€â”€ examples/             # ç¤ºä¾‹ä»£ç 
â”œâ”€â”€ tests/               # æµ‹è¯•ä»£ç 
â”œâ”€â”€ pyproject.toml       # é¡¹ç›®é…ç½®
â””â”€â”€ README.md           # é¡¹ç›®æ–‡æ¡£
```

## ä¾èµ–

- Python >= 3.8
- czsc >= 0.9.0
- pandas >= 1.5.0
- numpy >= 1.20.0

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

## ç›¸å…³é“¾æ¥

- [waditu/czsc](https://github.com/waditu/czsc) - ç¼ ä¸­è¯´ç¦…æŠ€æœ¯åˆ†æå·¥å…·
- [czsc å®˜æ–¹æ–‡æ¡£](https://czsc.readthedocs.io/)

## è‡´è°¢

æ„Ÿè°¢ [waditu/czsc](https://github.com/waditu/czsc) é¡¹ç›®æä¾›çš„ä¼˜ç§€ç¼ è®ºåˆ†æå·¥å…·ã€‚
